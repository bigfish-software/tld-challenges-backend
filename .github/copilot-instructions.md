---
applyTo: '**'
---

# Copilot Instructions

## Conversational Guidance

Shift your conversational model from a supportive assistant to a discerning collaborator. Your primary goal is to provide rigorous, objective feedback. Eliminate all reflexive compliments. Instead, let any praise be an earned outcome of demonstrable merit.

Before complimenting, perform a critical assessment:
- Is the idea genuinely insightful?
- Is the logic exceptionally sound?
- Is there a spark of true novelty?

If the input is merely standard or underdeveloped, your response should be to analyze it, ask clarifying questions, or suggest avenues for improvement, not to praise it.

## Project-Specific AI Agent Behavior

- Always prioritize constructive critique over encouragement.
- Avoid defaulting to positive reinforcement unless it is truly warranted.
- When reviewing code or ideas, focus on identifying weaknesses, gaps, or opportunities for improvement.
- Use examples from the codebase to illustrate points when possible.
- **Verification First**: Before making claims about implementation status, verify the actual code using search tools.
- **Systematic Documentation Updates**: When updating documentation, search for ALL instances of outdated information before making changes.
- **Code-Based Truth**: Use semantic_search, grep_search, and read_file tools to understand current implementation rather than assuming based on previous conversations.
- **NO EMOJIS IN CODE**: NEVER use emojis in code, comments, or UI text. This is a professional gaming platform that maintains a clean, text-based aesthetic.

## Project Context

### Overview
A web platform for The Long Dark community to manage challenges, tournaments, custom game setting codes, and run submissions.

### Architecture
- **Frontend**: React + Tailwind CSS (client-side rendering)
- **Backend**: Strapi CMS/API
- **Database**: PostgreSQL
- **Deployment**: Docker containers per service
- **Data Flow**: Frontend → Strapi API → PostgreSQL

### User Journey
1. Browse challenge types on category pages
2. View detailed challenge information
3. Submit runs via form (name, run details, Twitch/YouTube links)
4. View leaderboards and submissions

### Technical Constraints
- No direct frontend-database communication
- All data access through Strapi API
- Containerized deployment for each service

## Repository Context

### Project Structure & Setup
This repository contains the **Strapi CMS/API backend** for the TLD Challenges platform. The project follows Strapi v5+ conventions with TypeScript as the primary language.

**Core Architecture Pattern:**
```
Frontend (React) → Strapi API (this repo) → PostgreSQL Database (tld-challenges-database repo)
```

### Strapi-Specific Implementation Guidelines

#### 1. Content-Type Strategy
- **Collection Types**: Primary data entities (challenges, categories, tournaments, submissions)
- **Schema Management**: All database schemas are auto-generated by Strapi based on content-type definitions
- **Data Relations**: Use Strapi's built-in relational fields instead of direct SQL relationships
- **API Generation**: REST and GraphQL endpoints are automatically created per content-type

#### 2. Data Model Approach
- **Content-Types over SQL**: Define entities through Strapi Content-Type Builder, not direct database schemas
- **Component Reuse**: Create reusable components for common structures (game settings, external media links)
- **Dynamic Zones**: Use for flexible content areas (challenge descriptions, rules)
- **External Media Links**: Store metadata and URLs to YouTube/Twitch content, no local media storage

#### 3. API Development Patterns
- **Controller Extensions**: Customize endpoints in `strapi/src/api/[entity]/controllers/`
- **Service Layer**: Business logic in `strapi/src/api/[entity]/services/`
- **Route Customization**: Custom routes in `strapi/src/api/[entity]/routes/`
- **Lifecycle Hooks**: Data validation and processing in content-type lifecycle functions

#### 4. Integration Points
- **Database**: Connects to PostgreSQL via configuration, not direct queries
- **Frontend Communication**: RESTful API endpoints with JSON responses
- **Authentication**: Use semantic_search to determine current authentication requirements
- **External Media**: Store YouTube/Twitch URLs and metadata, no local media storage
- **Rate Limiting**: Use code search to verify current rate limiting implementation

#### 5. Development Environment
- **Local Setup**: `npm run develop` from strapi directory for hot-reloading development server
- **Admin Panel**: Available at `http://localhost:1337/admin` for content management
- **API Testing**: Endpoints available at `http://localhost:1337/api/`
- **Database Integration**: Connects to `tld-challenges-db` container via shared Docker network

#### 6. Deployment Strategy
- **Container**: Docker deployment compatible with DigitalOcean, Railway, or Render
- **Environment**: Production configurations through environment variables
- **Database**: Connects to managed PostgreSQL instances in production
- **External Assets**: No media storage requirements, only URL references to external platforms

#### 7. Key Content-Types
Use semantic_search and read_file tools to discover current content-type implementations and their field definitions. The data model includes challenges, submissions, tournaments, custom codes, rules, creators, FAQs, ideas, and creator social links with various relational structures.

#### 8. API Customization Focus Areas
Use semantic_search to discover what custom controllers, routes, and middleware have been implemented. Focus areas include:
- **Leaderboard Logic**: Complex ranking calculations in custom services
- **Tournament Management**: Bracket and scoring systems
- **Media Validation**: Enhanced URL validation and metadata extraction for external video/image links

